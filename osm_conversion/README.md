# OSM Conversion

Convertir un résultat d'overpass vers un tableau CSV de base de données présentant les limites de vitesse de tronçons routiers.

file:///home/tykayn/Nextcloud/boulot/osm/bdd_vitesses/overpass_results

## Requête source Overpass turbo
https://overpass-turbo.eu/s/1kGY


fetch http pour la zone géographique 75013
``` bash
wget https://overpass-api.de/api/interpreter?data=%2F*%0AThis+has+been+generated+by+the+overpass-turbo+wizard.%0AThe+original+search+was%3A%0A%E2%80%9Chighway+in+%22my-zone%C3%A9%22%E2%80%9D%0A*%2F%0A%5Bout%3Ajson%5D%5Btimeout%3A25%5D%3B%0A%2F%2F+fetch+area+%E2%80%9Cmy-zone%C3%A9%E2%80%9D+to+search+in%0Aarea(id%3A3610777016)-%3E.searchArea%3B%0A%2F%2F+gather+results%0A(%0A++%2F%2F+query+part+for%3A+%E2%80%9Chighway%E2%80%9D%0A++way%5B%22highway%22%5D(area.searchArea)%3B%0A)%3B%0A%2F%2F+print+results%0Aout+body%3B%0A%3E%3B%0Aout+skel+qt%3B
```

## CSV output
national_ref;way_id;osm_link;name;highway_tag;speed_limit;

* Base de données ouverte des limitations de vitesse OSM

  [[id:3eb3f5b5-d08b-4f85-9a78-b3d3d426a2a6][osm_openstreetmap]]
  CREATED: <2022-08-03 mer. 09:39>

IGN direction générale:
73 avenue de Paris
94165 SAINT-MANDÉ Cedex
https://www.ign.fr/institut/toutes-nos-adresses
https://www.ign.fr/la-demarche-geocommuns

* Formats proposés
  ** nomenclature des noms de fichiers
  bdd-vitesses-fr-osm_ways_zone-departement-75_date-made-2022-08-03_full.zip

*** nom du projet de bdd
*** sorte d'agrégat des données
*** délimitation territoriale
département, région, france entière dom tom.
*** date de création
date YYYY-MM-DD
*** post traitement
type de raffinage des données, version longue ou courte
** Formats de fichiers
*** CSV
*** json
*** base sqlite avec plusieurs tables
*** gtfs ?

* Requête overpass turbo

output : export_briis.json
[[file:~/Nextcloud/boulot/osm/bdd_vitesses/export_briis.json]]

https://overpass-turbo.eu/s/1kGY
#+begin_src overpass
/*
This has been generated by the overpass-turbo wizard.
The original search was:
“highway=primary”
*/
[out:json][timeout:25];
// gather results
(
// query part for all highway
way["highway"]({{bbox}});
);
// print results
out body;
>;
out skel qt;
#+end_src


	Requête pour une ville, exemple Saint Mandé.

	#+begin_src
		/*
This has been generated by the overpass-turbo wizard.
The original search was:
“highway in "Saint Mandé"”
*/
[out:json][timeout:25];
// fetch area “Saint Mandé” to search in
{{geocodeArea:Saint Mandé}}->.searchArea;
// gather results
(
// query part for: “highway”
way["highway"](area.searchArea);
);
// print results
out body;
>;
out skel qt;

	#+end_src
* Plan
  ** démo de csv pour la base nationale des limitations de vitesse à partir d'un export overpass sur les highway. débuter sur la rue juste devant le siège social de l'ign et d'osm.
  ** faire une page de wiki pour la bdd vitesse et les réflexions autour. format de données, colonnes, moyens d'extraction, présentation datée, schéma de données, lien vers osm pour les ways, affichage de tags, points géographiques.
  ** faire un topic sur forum osm pour la bdd vitesse.